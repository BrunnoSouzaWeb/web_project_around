!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)},(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"addOneItem",value:function(e){this._container.prepend(e)}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var c=function(){return e=function e(t,n,r,o,i,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._idOwnerCard=t.owner._id,this._idCard=t._id,this._idUser=n,this._cardSelector=r,this._handleCardClick=o,this._handleDeleteCard=i,this._handleLikeCard=u,this._handleDislikeCard=c},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".elements__image").src=this._link,this._element.querySelector(".elements__title").textContent=this._name,this._element.querySelector(".elements__count-like").textContent=this._likes.length,this._likeButton=this._element.querySelector(".elements__image-like"),this._likes.find((function(t){return t._id===e._idUser}))&&this._likeButton.classList.toggle("elements__image-like_active"),this._idOwnerCard!==this._idUser&&(this._element.querySelector(".elements__image-trash").style.display="none"),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._idOwnerCard===this._idUser&&this._element.querySelector(".elements__image-trash").addEventListener("click",(function(){e._handleDeleteCard()})),this._likeButton.addEventListener("click",(function(){e._likes.some((function(t){return t._id===e._idUser}))?(e._handleDislikeCard(e._idCard).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("elements__image-like_active")):(e._handleLikeCard(e._idCard).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("elements__image-like_active"))})),this._element.querySelector(".elements__image").addEventListener("click",(function(){e._showCardPopupClick()}))}},{key:"_showCardPopupClick",value:function(){this._handleCardClick(this._name,this._link)}},{key:"remove",value:function(){this._element.remove()}},{key:"_changeLikeCounter",value:function(e){this._likes=e,this._element.querySelector(".elements__count-like").textContent=e.length}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popupImage=document.querySelector(this._popupSelector)},(t=[{key:"handleEscapeKey",value:function(e){"Escape"===e.key&&document.querySelectorAll(".popup__open").forEach((function(e){return closePopup(e)}))}},{key:"openPopup",value:function(){this._popupImage.classList.add("popup__open")}},{key:"closePopup",value:function(){this._popupImage.classList.remove("popup__open"),0===document.querySelectorAll(".popup__open").length&&document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;document.querySelector(".popup__image-button-closed").addEventListener("click",(function(){e.closePopup()})),document.querySelectorAll(".popup__overlay").forEach((function(t){t.addEventListener("click",(function(){e.closePopup()}))})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function d(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(null,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var S=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=d(this,t,[r]))._name=e,o._link=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,r=[{key:"openPopup",value:function(e,n){var r,o,i;(r=t,o=this,i=h(b(1&3?r.prototype:r),"openPopup",o),function(e){return i.apply(o,e)})([]);var u=document.querySelector(".popup__image-photo"),c=document.querySelector(".popup__image-name");u.src=this._link,c.textContent=this._name,this.alt=this._name}}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}function P(e,t,n){return t=O(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function j(e,t,n,r){var o=C(O(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var q=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=P(this,t,[e]))._handleSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e=document.querySelector(this._popupSelector).querySelector("form"),t={};return Array.from(e.elements).forEach((function(e){e.name&&(t[e.name]=e.value)})),t}},{key:"closePopup",value:function(){j(t,"closePopup",this,3)([]),document.querySelector(this._popupSelector).querySelector("form")}},{key:"defineTextButton",value:function(){var e=document.querySelector(this._popupSelector).querySelector(".popup__button"),t="";"Salvar"===e.textContent.trim()?t="Salvando...":"Salvando..."===e.textContent.trim()&&(t="Salvar"),e.textContent=t}},{key:"setEventListeners",value:function(){var e=this;j(t,"setEventListeners",this,3)([]),document.querySelector(this._popupSelector).querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e.defineTextButton(),e._handleSubmit(e._getInputValues())}))}}])&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function U(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}function B(e,t,n){return t=A(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function R(e,t,n,r){var o=D(A(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(null,arguments)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var N=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=B(this,t,[e]))._handleConfirmation=n,r._formElement=document.querySelector(".popup__confirmation-form"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,(r=[{key:"setEventListeners",value:function(){var e=this;R(t,"setEventListeners",this,3)([]),document.querySelector(".popup__confirmation-form").addEventListener("submit",(function(n){n.preventDefault(),e._handleConfirmation(e._card),R(t,"closePopup",e,3)([])}))}},{key:"openPopup",value:function(e){R(t,"openPopup",this,3)([]),this._card=e}}])&&I(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var z=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)},(t=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._settings.inactiveButtonClass):this._buttonElement.classList.remove(this._settings.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}var Q=function(){return e=function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,userAvatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){e&&(this._name.textContent=e.name,this._about.textContent=e.about,e.avatar&&(this._avatar.src=e.avatar),e._id&&(this._idUser=e._id))}}])&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e){if("object"!=W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}var Z=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers},(t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editPerfil",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"dislikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editFotoPerfil",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatarLink})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web-ptbr-cohort-12",headers:{authorization:"1f012d49-8fd6-43fa-aeaf-50158ed3cf4a","Content-Type":"application/json"}}),$=new Q({name:".profile__text",about:".profile__profession",avatar:".profile__image"});Z.getUserInfo().then((function(e){$.setUserInfo(e),Z.getInitialCards().then((function(e){var t=new r({items:e,renderer:function(e){var n=new S(e.name,e.link,"#popup-image");n.setEventListeners();var r=new c(e,$._idUser,".template-card",(function(){return n.openPopup(e.name,e.link)}),(function(){return oe.openPopup(r)}),(function(){return Z.likeCard(e._id)}),(function(){return Z.dislikeCard(e._id)})),o=r.generateCard();t.addItem(o)}},".elements");t.renderItems()}))})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){ee.openPopup()}));var ee=new q("#popup-perfil",(function(e){var t=e.name,n=e.about;Z.editPerfil({name:t,about:n}).then((function(){$.setUserInfo({name:t,about:n}),ee.closePopup(),ee.defineTextButton()}))}));ee.setEventListeners(),document.querySelector(".popup__button-closed").addEventListener("click",(function(){ee.closePopup(".popup")}));var te=new q("#popup-card",(function(e){e.title,e.link;var t=document.querySelector("#input-title").value,n=document.querySelector("#input-url").value;Z.addNewCard({name:t,link:n}).then((function(e){var o=new r({items:[{name:t,link:n}],renderer:function(t){var n=new S(t.name,t.link,"#popup-image"),r=new c(e,$._idUser,".template-card",(function(){return n.openPopup(e.name,e.link)}),(function(){return oe.openPopup(r)}),(function(){return Z.likeCard(e._id)}),(function(){return Z.dislikeCard(e._id)})),i=r.generateCard();o.addOneItem(i)}},".elements");o.renderItems(),te.closePopup(),te.defineTextButton()}))}));te.setEventListeners();var ne=document.querySelector(".profile__add-button"),re=document.querySelector(".popup__card-button-closed");ne.addEventListener("click",(function(){te.openPopup()})),re.addEventListener("click",(function(){te.closePopup()}));var oe=new N("#popup-confirmation",(function(e){Z.deleteCard(e._idCard).then((function(){oe.closePopup(),e.remove()}))}));oe.setEventListeners(),document.querySelector(".popup__confirmation-button-closed").addEventListener("click",(function(){oe.closePopup()}));var ie=new q("#popup-avatar",(function(e){Z.editFotoPerfil(e).then((function(e){$.setUserInfo(e),ie.closePopup(),ie.defineTextButton()}))}));ie.setEventListeners(),document.querySelector(".profile__edit-avatar").addEventListener("click",(function(){ie.openPopup()})),document.querySelector(".popup__avatar-button-closed").addEventListener("click",(function(){ie.closePopup()}));var ue={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};new z(ue,document.querySelector("#form-perfil")).enableValidation(),new z(ue,document.querySelector("#form-avatar")).enableValidation(),new z(ue,document.querySelector("#form-card")).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmEsb0JBQXFCLHlCQUNyQlAsZ0JBQWlCLDBCQUNqQjZFLFdBQVksd0JBR2MsSUFBSTFGLEVBQWNDLEdBVjFCbEcsU0FBU0MsY0FBYyxpQkFXdkIyTCxtQkFHSyxJQUFJM0YsRUFBY0MsR0FEakJsRyxTQUFTQyxjQUFjLGlCQUVoQzJMLG1CQUdhLElBQUkzRixFQUFjQyxHQURwQmxHLFNBQVNDLGNBQWMsZUFFN0IyTCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZE9uZUl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaXRlbSxcbiAgICBpZFVzZXIsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxuICAgIGhhbmRsZUxpa2VDYXJkLFxuICAgIGhhbmRsZURpc2xpa2VDYXJkXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcbiAgICB0aGlzLl9saWtlcyA9IGl0ZW0ubGlrZXM7XG5cbiAgICB0aGlzLl9pZE93bmVyQ2FyZCA9IGl0ZW0ub3duZXIuX2lkO1xuICAgIHRoaXMuX2lkQ2FyZCA9IGl0ZW0uX2lkO1xuXG4gICAgdGhpcy5faWRVc2VyID0gaWRVc2VyO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG5cbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuX2hhbmRsZURpc2xpa2VDYXJkID0gaGFuZGxlRGlzbGlrZUNhcmQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY291bnQtbGlrZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZS1saWtlXCIpO1xuXG4gICAgY29uc3QgdXNlckhhc0xpa2VkID0gdGhpcy5fbGlrZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX2lkVXNlcik7XG5cbiAgICBpZiAodXNlckhhc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19faW1hZ2UtbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lkT3duZXJDYXJkICE9PSB0aGlzLl9pZFVzZXIpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2UtdHJhc2hcIikuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgIFwibm9uZVwiO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcy5faWRPd25lckNhcmQgPT09IHRoaXMuX2lkVXNlcikge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2UtdHJhc2hcIilcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX2lkVXNlcikpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGlzbGlrZUNhcmQodGhpcy5faWRDYXJkKS50aGVuKChjYXJkV2l0aExpa2UpID0+IHtcbiAgICAgICAgICB0aGlzLl9jaGFuZ2VMaWtlQ291bnRlcihjYXJkV2l0aExpa2UubGlrZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2ltYWdlLWxpa2VfYWN0aXZlXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQodGhpcy5faWRDYXJkKS50aGVuKChjYXJkV2l0aExpa2UpID0+IHtcbiAgICAgICAgICB0aGlzLl9jaGFuZ2VMaWtlQ291bnRlcihjYXJkV2l0aExpa2UubGlrZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2ltYWdlLWxpa2VfYWN0aXZlXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fc2hvd0NhcmRQb3B1cENsaWNrKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9zaG93Q2FyZFBvcHVwQ2xpY2soKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfY2hhbmdlTGlrZUNvdW50ZXIobmV3QXJyYXlMaWtlcykge1xuICAgIHRoaXMuX2xpa2VzID0gbmV3QXJyYXlMaWtlcztcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY291bnQtbGlrZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICBuZXdBcnJheUxpa2VzLmxlbmd0aDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBoYW5kbGVFc2NhcGVLZXkoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIGNvbnN0IG9wZW5Qb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19vcGVuXCIpO1xuICAgICAgb3BlblBvcHVwcy5mb3JFYWNoKChwb3B1cCkgPT4gY2xvc2VQb3B1cChwb3B1cCkpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5Qb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlblwiKTtcbiAgfVxuXG4gIGNsb3NlUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5cIik7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX29wZW5cIikubGVuZ3RoID09PSAwKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBidXR0b25DbG9zZVBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2ltYWdlLWJ1dHRvbi1jbG9zZWRcIlxuICAgICk7XG5cbiAgICBidXR0b25DbG9zZVBvcHVwSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcG9wdXBPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fb3ZlcmxheVwiKTtcbiAgICBwb3B1cE92ZXJsYXkuZm9yRWFjaCgob3ZlcmxheSkgPT4ge1xuICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gIH1cblxuICBvcGVuUG9wdXAobmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xuXG4gICAgY29uc3QgcG9wdXBQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXBob3RvXCIpO1xuXG4gICAgY29uc3QgcG9wdXBUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLW5hbWVcIik7XG5cbiAgICBwb3B1cFBob3RvLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5hbHQgPSB0aGlzLl9uYW1lO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgcG9wdXBPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcbiAgICBjb25zdCBmb3JtID0gcG9wdXBPcGVuLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgY29uc3QgaW5wdXRGb3JtcyA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cyk7XG4gICAgaW5wdXRGb3Jtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5uYW1lKSB7XG4gICAgICAgIGlucHV0VmFsdWVzW2VsZW1lbnQubmFtZV0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgY2xvc2VQb3B1cCgpIHtcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XG4gICAgY29uc3QgcG9wdXBPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcbiAgICBjb25zdCBmb3JtID0gcG9wdXBPcGVuLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICB9XG5cbiAgZGVmaW5lVGV4dEJ1dHRvbigpIHtcbiAgICBjb25zdCB0ZXh0QnV0dG9uID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xuXG4gICAgbGV0IGRlZmluZVRleHQgPSBcIlwiO1xuICAgIGlmICh0ZXh0QnV0dG9uLnRleHRDb250ZW50LnRyaW0oKSA9PT0gXCJTYWx2YXJcIikge1xuICAgICAgZGVmaW5lVGV4dCA9IFwiU2FsdmFuZG8uLi5cIjtcbiAgICB9IGVsc2UgaWYgKHRleHRCdXR0b24udGV4dENvbnRlbnQudHJpbSgpID09PSBcIlNhbHZhbmRvLi4uXCIpIHtcbiAgICAgIGRlZmluZVRleHQgPSBcIlNhbHZhclwiO1xuICAgIH1cbiAgICB0ZXh0QnV0dG9uLnRleHRDb250ZW50ID0gZGVmaW5lVGV4dDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgY29uc3QgcG9wdXBPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcbiAgICBjb25zdCBmb3JtID0gcG9wdXBPcGVuLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuZGVmaW5lVGV4dEJ1dHRvbigpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVDb25maXJtYXRpb24pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb24gPSBoYW5kbGVDb25maXJtYXRpb247XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb25maXJtYXRpb24tZm9ybVwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb25maXJtYXRpb24tZm9ybVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybWF0aW9uKHRoaXMuX2NhcmQpO1xuICAgICAgICBzdXBlci5jbG9zZVBvcHVwKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIG9wZW5Qb3B1cChjYXJkKSB7XG4gICAgc3VwZXIub3BlblBvcHVwKCk7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgICB1c2VyQXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgICBpZiAoZGF0YS5hdmF0YXIpIHtcbiAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuX2lkKSB7XG4gICAgICAgIHRoaXMuX2lkVXNlciA9IGRhdGEuX2lkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBkYXRhLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGRhdGEuaGVhZGVycztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBlZGl0UGVyZmlsKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBlZGl0Rm90b1BlcmZpbChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhckxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViLXB0YnItY29ob3J0LTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjFmMDEyZDQ5LThmZDYtNDNmYS1hZWFmLTUwMTU4ZWQzY2Y0YVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwaTtcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL2NhcmQuanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IFBvcFVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCBhcGkgZnJvbSBcIi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBcIi5wcm9maWxlX190ZXh0XCIsXG4gIGFib3V0OiBcIi5wcm9maWxlX19wcm9mZXNzaW9uXCIsXG4gIGF2YXRhcjogXCIucHJvZmlsZV9faW1hZ2VcIixcbn0pO1xuXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChkYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuXG4gIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChpbml0aWFsQ2FyZHMpID0+IHtcbiAgICBjb25zdCBjYXJkWm9uZSA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICAgICAgICAgICAgaXRlbS5uYW1lLFxuICAgICAgICAgICAgaXRlbS5saW5rLFxuICAgICAgICAgICAgXCIjcG9wdXAtaW1hZ2VcIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBwb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgdXNlckluZm8uX2lkVXNlcixcbiAgICAgICAgICAgIFwiLnRlbXBsYXRlLWNhcmRcIixcbiAgICAgICAgICAgICgpID0+IHBvcHVwSW1hZ2Uub3BlblBvcHVwKGl0ZW0ubmFtZSwgaXRlbS5saW5rKSxcbiAgICAgICAgICAgICgpID0+IHBvcHVwV2l0aENvbmZpcm1hdGlvbi5vcGVuUG9wdXAoY2FyZCksXG4gICAgICAgICAgICAoKSA9PiBhcGkubGlrZUNhcmQoaXRlbS5faWQpLFxuICAgICAgICAgICAgKCkgPT4gYXBpLmRpc2xpa2VDYXJkKGl0ZW0uX2lkKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICAgICAgY2FyZFpvbmUuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuXG4gICAgICBcIi5lbGVtZW50c1wiXG4gICAgKTtcblxuICAgIGNhcmRab25lLnJlbmRlckl0ZW1zKCk7XG4gIH0pO1xufSk7XG5cbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRm9ybVBlcmZpbC5vcGVuUG9wdXAoKTtcbn0pO1xuXG5jb25zdCBoYW5kbGVTdWJtaXRQZXJmaWxGb3JtID0gKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICBhcGkuZWRpdFBlcmZpbCh7IG5hbWUsIGFib3V0IH0pLnRoZW4oKCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XG4gICAgcG9wdXBGb3JtUGVyZmlsLmNsb3NlUG9wdXAoKTtcbiAgICBwb3B1cEZvcm1QZXJmaWwuZGVmaW5lVGV4dEJ1dHRvbigpO1xuICB9KTtcbn07XG5cbmNvbnN0IHBvcHVwRm9ybVBlcmZpbCA9IG5ldyBQb3BVcFdpdGhGb3JtKFxuICBcIiNwb3B1cC1wZXJmaWxcIixcbiAgaGFuZGxlU3VibWl0UGVyZmlsRm9ybVxuKTtcblxucG9wdXBGb3JtUGVyZmlsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uLWNsb3NlZFwiKTtcblxuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBGb3JtUGVyZmlsLmNsb3NlUG9wdXAoXCIucG9wdXBcIik7XG59KTtcblxuY29uc3QgaGFuZGxlU3VibWl0UG9wQ2FyZCA9ICh7IHRpdGxlLCBsaW5rIH0pID0+IHtcbiAgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtdGl0bGVcIikudmFsdWU7XG4gIGNvbnN0IGltYWdlTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC11cmxcIikudmFsdWU7XG5cbiAgYXBpLmFkZE5ld0NhcmQoeyBuYW1lOiB0aXRsZUlucHV0LCBsaW5rOiBpbWFnZUxpbmtJbnB1dCB9KS50aGVuKChyZXNwKSA9PiB7XG4gICAgY29uc3QgY2FyZE5vdm8gPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IFt7IG5hbWU6IHRpdGxlSW5wdXQsIGxpbms6IGltYWdlTGlua0lucHV0IH1dLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICAgICAgICAgICAgaXRlbS5uYW1lLFxuICAgICAgICAgICAgaXRlbS5saW5rLFxuICAgICAgICAgICAgXCIjcG9wdXAtaW1hZ2VcIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgICByZXNwLFxuICAgICAgICAgICAgdXNlckluZm8uX2lkVXNlcixcbiAgICAgICAgICAgIFwiLnRlbXBsYXRlLWNhcmRcIixcbiAgICAgICAgICAgICgpID0+IHBvcHVwSW1hZ2Uub3BlblBvcHVwKHJlc3AubmFtZSwgcmVzcC5saW5rKSxcbiAgICAgICAgICAgICgpID0+IHBvcHVwV2l0aENvbmZpcm1hdGlvbi5vcGVuUG9wdXAoY2FyZCksXG4gICAgICAgICAgICAoKSA9PiBhcGkubGlrZUNhcmQocmVzcC5faWQpLFxuICAgICAgICAgICAgKCkgPT4gYXBpLmRpc2xpa2VDYXJkKHJlc3AuX2lkKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiAgICAgICAgICBjYXJkTm92by5hZGRPbmVJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5lbGVtZW50c1wiXG4gICAgKTtcblxuICAgIGNhcmROb3ZvLnJlbmRlckl0ZW1zKCk7XG4gICAgcG9wdXBGb3JtQ2FyZC5jbG9zZVBvcHVwKCk7XG4gICAgcG9wdXBGb3JtQ2FyZC5kZWZpbmVUZXh0QnV0dG9uKCk7XG4gIH0pO1xufTtcblxuY29uc3QgcG9wdXBGb3JtQ2FyZCA9IG5ldyBQb3BVcFdpdGhGb3JtKFwiI3BvcHVwLWNhcmRcIiwgaGFuZGxlU3VibWl0UG9wQ2FyZCk7XG5cbnBvcHVwRm9ybUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGJ1dHRvbkNsb3NlQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcmQtYnV0dG9uLWNsb3NlZFwiKTtcblxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEZvcm1DYXJkLm9wZW5Qb3B1cCgpO1xufSk7XG5cbmJ1dHRvbkNsb3NlQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEZvcm1DYXJkLmNsb3NlUG9wdXAoKTtcbn0pO1xuXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIiNwb3B1cC1jb25maXJtYXRpb25cIixcbiAgKGNhcmQpID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLl9pZENhcmQpLnRoZW4oKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmNsb3NlUG9wdXAoKTtcbiAgICAgIGNhcmQucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH1cbik7XG5cbnBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBidXR0b25DbG9zZUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19jb25maXJtYXRpb24tYnV0dG9uLWNsb3NlZFwiXG4pO1xuXG5idXR0b25DbG9zZUNvbmZpcm1hdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFdpdGhDb25maXJtYXRpb24uY2xvc2VQb3B1cCgpO1xufSk7XG5cbmNvbnN0IHBvcHVwQXZhdGFyUHJvZmlsZSA9IG5ldyBQb3BVcFdpdGhGb3JtKFwiI3BvcHVwLWF2YXRhclwiLCAoaW5wdXRzKSA9PiB7XG4gIGFwaS5lZGl0Rm90b1BlcmZpbChpbnB1dHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgcG9wdXBBdmF0YXJQcm9maWxlLmNsb3NlUG9wdXAoKTtcbiAgICBwb3B1cEF2YXRhclByb2ZpbGUuZGVmaW5lVGV4dEJ1dHRvbigpO1xuICB9KTtcbn0pO1xuXG5wb3B1cEF2YXRhclByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWF2YXRhclwiKTtcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBwb3B1cEF2YXRhclByb2ZpbGUub3BlblBvcHVwKCk7XG59KTtcblxuY29uc3QgYnV0dG9uQ2xvc2VBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fYXZhdGFyLWJ1dHRvbi1jbG9zZWRcIlxuKTtcblxuYnV0dG9uQ2xvc2VBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXJQcm9maWxlLmNsb3NlUG9wdXAoKTtcbn0pO1xuXG5jb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1wZXJmaWxcIik7XG5jb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBmb3JtVmFsaWRhdG9yUGVyZmlsID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbmZvcm1WYWxpZGF0b3JQZXJmaWwuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtRWxlbWVudEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1hdmF0YXJcIik7XG5jb25zdCBmb3JtQXZhdGFyUGVyZmlsID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50QXZhdGFyKTtcbmZvcm1BdmF0YXJQZXJmaWwuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtRWxlbWVudENhcmROb3ZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWNhcmRcIik7XG5jb25zdCBmb3JtVmFsaWRhdG9yQ2FyZE5vdm8gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnRDYXJkTm92byk7XG5mb3JtVmFsaWRhdG9yQ2FyZE5vdm8uZW5hYmxlVmFsaWRhdGlvbigpO1xuIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJrZXkiLCJ2YWx1ZSIsIl90aGlzIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIkNhcmQiLCJpZFVzZXIiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVEaXNsaWtlQ2FyZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2lkT3duZXJDYXJkIiwib3duZXIiLCJfaWQiLCJfaWRDYXJkIiwiX2lkVXNlciIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUNhcmQiLCJfaGFuZGxlRGlzbGlrZUNhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9saWtlQnV0dG9uIiwiZmluZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInN0eWxlIiwiZGlzcGxheSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90aGlzMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzb21lIiwidGhlbiIsImNhcmRXaXRoTGlrZSIsIl9jaGFuZ2VMaWtlQ291bnRlciIsIl9zaG93Q2FyZFBvcHVwQ2xpY2siLCJyZW1vdmUiLCJuZXdBcnJheUxpa2VzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBJbWFnZSIsImV2dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cCIsImNsb3NlUG9wdXAiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwib3ZlcmxheSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9pbmhlcml0cyIsInBvcHVwUGhvdG8iLCJwb3B1cFRpdGxlIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsInNlbGVjdG9yIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsImZvcm0iLCJpbnB1dFZhbHVlcyIsIkFycmF5IiwiZnJvbSIsImVsZW1lbnRzIiwiX3N1cGVyUHJvcEdldCIsInRleHRCdXR0b24iLCJkZWZpbmVUZXh0IiwidHJpbSIsInByZXZlbnREZWZhdWx0IiwiZGVmaW5lVGV4dEJ1dHRvbiIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZUNvbmZpcm1hdGlvbiIsIl9oYW5kbGVDb25maXJtYXRpb24iLCJfZm9ybUVsZW1lbnQiLCJfY2FyZCIsImNhcmQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9pbnB1dExpc3QiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiVXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsIl9hYm91dCIsIl9hdmF0YXIiLCJ1c2VyQXZhdGFyIiwiZGF0YSIsIkFwaSIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3JlZjIiLCJjYXJkSWQiLCJhdmF0YXJMaW5rIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiYXBpIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImluaXRpYWxDYXJkcyIsImNhcmRab25lIiwicG9wdXBJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwib3BlblBvcHVwIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBGb3JtUGVyZmlsIiwiUG9wVXBXaXRoRm9ybSIsImVkaXRQZXJmaWwiLCJwb3B1cEZvcm1DYXJkIiwidGl0bGUiLCJ0aXRsZUlucHV0IiwiaW1hZ2VMaW5rSW5wdXQiLCJhZGROZXdDYXJkIiwicmVzcCIsImNhcmROb3ZvIiwiYWRkT25lSXRlbSIsImJ1dHRvbkFkZENhcmQiLCJidXR0b25DbG9zZUFkZENhcmQiLCJkZWxldGVDYXJkIiwicG9wdXBBdmF0YXJQcm9maWxlIiwiaW5wdXRzIiwiZWRpdEZvdG9QZXJmaWwiLCJyZXN1bHQiLCJmb3JtU2VsZWN0b3IiLCJlcnJvckNsYXNzIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=